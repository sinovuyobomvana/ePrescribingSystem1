@model EPrescribingSystem.Models.Prescription

@{
    ViewData["Title"] = "Details";
    Layout = "_Layout";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>

<h2>My Prescription Details</h2>

<div>
    <h4>@Model.ApplicationUser.FirstName @Model.ApplicationUser.LastName Prescription</h4>
    <hr />
    <form>
        <table id="example" class="display nowrap" style="width:100%">
            <thead>
                <tr>
                    <th>Medication Name</th>
                    <th>Instruction</th>
                    <th>Number of repeats</th>
                    <th>Number of repeats left</th>
                    <th>Doctor</th>
             
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        @Html.DisplayFor(model => model.Medication.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(model => model.Instruction)
                    </td>
                    <td>
                        @Html.DisplayFor(model => model.NumberOfRepeats)
                    </td>
                    <td>
                        @Html.DisplayFor(model => model.NumberOfRepeatsLeft)
                    </td>
                    <td>
                        @Html.DisplayFor(model => model.Doctor.FirstName)  @Html.DisplayFor(model => model.Doctor.LastName)
                    </td>
                   
                </tr>

                @if (Model.Instruction2 != null)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(model => model.Med2.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(model => model.Instruction2)
                        </td>
                        <td>
                            @Html.DisplayFor(model => model.NumberOfRepeats2)
                        </td>
                        <td>
                            @Html.DisplayFor(model => model.NumberOfRepeatsLeft2)
                        </td>
                        <td>
                            @Html.DisplayFor(model => model.Doctor.FirstName)  @Html.DisplayFor(model => model.Doctor.LastName)
                        </td>
                    
                    </tr>
                }

                @if (Model.Instruction3 != null)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(model => model.Medicine3.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(model => model.Instruction3)
                        </td>
                        <td>
                            @Html.DisplayFor(model => model.NumberOfRepeats3)
                        </td>
                        <td>
                            @Html.DisplayFor(model => model.NumberOfRepeatsLeft3)
                        </td>
                        <td>
                            @Html.DisplayFor(model => model.Doctor.FirstName)  @Html.DisplayFor(model => model.Doctor.LastName)
                        </td>
                     
                    </tr>
                }
            </tbody>

        </table>
    </form>
</div>
<div>
    @* <a asp-action="Edit" asp-route-id="@Model.PrescriptionID">Edit</a> |*@
    <a asp-action="Index" asp-route-id="@Model.ApplicationUserID">Back to List</a>
</div>
<script type="text/javascript">
    function openSuccessModal(strMessage) {
        var myDiv = document.getElementById("MyModalSuccessAlertBody");
        myDiv.innerHTML = strMessage;
        $('#myModalSuccess').modal('show');

        window.setTimeout(function () {
            $('#myModalSuccess').modal('hide');
        }, 3000);
    }

    $(document).ready(function () {
        var msg = "@TempData["SuccessMessage"]";

        if (msg) {
            openSuccessModal(msg);
        }

        //debugger;
    });
</script>